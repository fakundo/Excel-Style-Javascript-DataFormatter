<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
</head>
<body>
Open console to watch results
<script type="text/javascript" src='dataformatter.js'></script>
<script>
	var r, k, count_passed = 0, tests = [

		['2.2', 'Number', '0', '2'],

		//predefined formats
		['233.44', 'Number', 'General Number', '233,4'],
		['99.99', 'Number', 'Currency', '99,99р.'],
		['0.333222', 'Number', 'Fixed', '0,33'],
		['-100', 'Number', 'Standard', '-100,00'],
		['0.783', 'Number', 'Percent', '78,30%'],
		['134.99', 'Number', 'Scientific', '1,35E+02'],
		['0', 'Number', 'Yes/No', 'Нет'],

		//exponentional form
		['22.0', 'Number', '0.0E+0', '2,2E+1'],
		['99.9', 'Number', '0E+0', '1E+2'],
		['23.55555', 'Number', '0.000E+0', '2,356E+1'],
		['-18000', 'Number', '0.00E+0', '-1,80E+4'],
		['0.0000034', 'Number', '0.00E+0', '3,40E-6'],
		['0', 'Number', '0E+0', '0E+0'],

		//percent
		['0.453', 'Number', '0.0%', '45,3%'],
		['0.453', 'Number', '0.0%%', '4530,0%%'],
		['53', 'Number', '0.##%', '5300,0%'],
		['432', 'Number', '0.## %', '43,2%'],
		['-10', 'Number', '0%', '-1000%'],

		//decimal
		['1', 'Number', '0.0', '1,0'],
		['143', 'Number', '0.0#', '143,0'],
		['45.12', 'Number', '0.0#', '45,12'],
		['45.123', 'Number', '0.0', '45,1'],
		['3.3', 'Number', '###.###', '3,3'],
		['9322', 'Number', '###.### ', '9,322'],
		['9322', 'Number', '### .###', '9,322'],
		['-32', 'Number', '#.????', '-32,0   '],

		//datetime
		['2013-05-22T13:19:59.000', 'DateTime', 'yyyy mm dd', '2013 05 22'],
		['2013-05-22T13:19:59.000', 'DateTime', 'yyyy mm dd am/pm', '2013 05 22 PM'],
		['2013-05-21T13:12:00.000', 'DateTime', '[hh]:mm:ss', '993949:12:00'],
		['2013-05-21T13:12:00.000', 'DateTime', 'hh-mm-ss', '17-12-00'],
		['2013-05-21T13:12:00.000', 'DateTime', 'hh-mm-ss am/pm', '05-12-00 PM'],

		//integer
		['123', 'Number', '0 ', '0'],
		['123', 'Number', '0', '123'],
		['123', 'Number', '0%', '12300%'],
		['123', 'Number', '0_-_-_-', '123   '],
		['123', 'Number', '0\\asd', '123asd'],
		['123', 'Number', 'asd', 'asd'],
		['123', 'Number', '0-0', '12-3'],
		['123000', 'Number', '0,0-0', '123 00-0'],
		['123000', 'Number', '0,0-0 ', '12-3'],

		//many sections and conditions
		['123', 'Number', '[Red]0;[Green]0.0', '123'],
		['-123', 'Number', '[Red]0;[Green]-0.0', '-123,0'],
		['0', 'Number', '[Red]0;[Green]-0.0', '0'],
		['10', 'Number', '[Red]0;[Green]-0.0;[Blue]0.0000', '10'],
		['0', 'Number', '[Red]0;[Green]-0.0;[Blue]0.0000', '0,0000'],
		['-10', 'Number', '[Red]0;[Green]-0.0;[Blue]0.0000', '-10,0'],
		['5', 'Number', '[>10][Red]0;[Green]-0.0;[Blue]0.0000', '5,0000'],
		['-5', 'Number', '[>10][Red]0;[Green]-0.0;[Blue]0.0000', '-5,0'],
		['40', 'Number', '[>10][Red]0;[Green]-0.0;[Blue]0.0000', '40'],
		['20', 'Number', '[>100][Red]0;[>10][Green]-0.0;[Blue]0.0000', '-20,0'],
		['140', 'Number', '[>100][Red]0;[>10][Green]-0.0;[Blue]0.0000', '140'],
		['3', 'Number', '[>100][Red]0;[>10][Green]-0.0;[Blue]0.0000', '3,0000'],
		['3', 'Number', '[>100][Red]0;[>10][Green]-0.0;[Blue]0.0000;ccvc@', '3,0000'],
		['tet', 'String', '[>100][Red]0;[>10][Green]-0.0;[Blue]0.0000;ccvc@', 'ccvctet'],
		['30', 'Number', '[>1000][Red]0;[>100][Green]-0.0;[>10][Blue]0.0000;ccvc@', '30,0000']

	];

	for (k = 0; k < tests.length; k++) {
		r = DataFormatter.format(tests[k][0], tests[k][1], tests[k][2]);
		if (r.value == tests[k][3]) count_passed++;
		else console.log(k + ' - test fail: ', tests[k], r);
	}

	console.log('-----------------------------------');
	console.log('Passed: ', count_passed, ' Failed: ', tests.length - count_passed);
	console.log('-----------------------------------');
</script>
</body>
</html>