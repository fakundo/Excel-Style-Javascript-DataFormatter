window.DataFormatter={functions:{},locale:{months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],months_short:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],days_short:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],thousands_separator:" ",decimal_separator:",",formats:{"General Number":"#.#",Currency:"#,##0.00р.;[Red]-#,##0.00р.",Fixed:"0.00",Standard:"#,##0.00",Percent:"0.00%",Scientific:"0.00E+00","Yes/No":'"Да";"Да";"Нет"',"True/False":'"Истина";"Истина";"Ложь"',"On/Off":'"Вкл";"Вкл";"Выкл"',"Short Date":"mm.dd.yyyy","Long Date":"dd mmmm yyyy","General Date":"mm.dd.yyyy h:mm","Medium Date":"dd.mmm.yy","Long Time":"hh:mm:ss AM/PM","Short Time":"h:mm","Medium Time":"hh:mm AM/PM"}},format:function(n,e,t){var r,a,m,s,i,l,u,o,f,h,c,g,p,d,y,D,b;if(t=t.toString(),DataFormatter.functions[t])return DataFormatter.functions[t](n,e);if(a="",p="",d="","General"===t)a+='var res = {value:n};\nif (type == "Number"){\nif (!isNaN(n) && n!=""){\nif (n<1e21 && n>-1e21){\nres.align="right";\nn=parseFloat(n);\nres.value=n;\nif (n != parseInt(n / 1)) {\n'+("res.value = (Math.round(n*100)/100).toString().replace(/\\./,'"+DataFormatter.locale.decimal_separator+"');\n")+'}\n}\nelse {\nres.value=n.toString().toUpperCase();\n}\n}\n}\nelse if(type == "DateTime" && !isNaN((new Date(n)).getTime())){\nres.align="right";\nres.value = Math.abs((new Date(n)).getTime()-(new Date("1899-12-31T00:00:00.000")).getTime())/1000/60/60/24;\n}\nreturn res;';else{for(y=t,DataFormatter.locale.formats[y]&&(y=DataFormatter.locale.formats[y]),y=y.replace(/"([^"]+)"|\\(.?)|(_.?)|(\*.?)|(")/g,function(n,e,t,r){return e?(p+=',"'+e.replace(/("|'|\\)/g,"\\$1")+'"',"["+(d+="$")+"]"):t?(p+=',"'+t.replace(/("|'|\\)/g,"\\$1")+'"',"["+(d+="$")+"]"):r?(p+='," "',"["+(d+="$")+"]"):""}),y=y.split(/;/),h=D=0,b=Math.min(4,y.length)-1;b>=0?b>=D:D>=b;h=b>=0?++D:--D){if(s="",r=!1,s=y[h].match(/\[((?:>|>=|<|<=|=|<>)[0-9\.]+?)]/),s?s='type=="Number" && n'+s[1].replace(/<>/,"!=").replace(/[=]/,"=="):0===h&&y.length>2?s='type=="Number" && n>0':0===h&&y.length>1?s='type=="Number" && n>=0':1===h&&y.length>1?(s='type=="Number" && n<0',r=!0):2===h&&y.length>3&&(s='type=="Number"'),m='var res={value:"'+y[h]+'"}, repl=['+p+"];\n",(g=y[h].match(/\[(Red|Green|White|Blue|Magenta|Yellow|Cyan|Black)]/i))&&(m+='res.color="'+g[1]+'";\n'),y[h]=y[h].replace(/(\[((?!((\$*?)|(h*?)|(m*?)|(s*?))]).*?)])/,""),y[h].match(/@/))m+='res.value="'+y[h]+'".replace(/@/,n);\n';else if(y[h].match(/#|\?|0/)){if(l='n=parseFloat(n);\nres.align="right";\n',r&&(l+="n=Math.abs(n);\n"),g=y[h].match(/(.*?)(?:(\.)(.*?))?e(?:\+|\-)(.*)/i))g[1]?c=Math.pow(10,g[1].match(/0|\?|#/g).length):(g[1]="#",c=10),g[3]?f=Math.pow(10,g[3].match(/0|\?|#/g).length):(g[3]="",f=1),g[4]||(g[4]=""),l+="var m=0,sign=n<0?-1:1;\nn=Math.abs(n);\nif(n!=0){\n"+("while(n < "+c+" || Math.round(n*"+f+")/"+f+"< "+c+"){\nn*=10;\nm++;\n}\n")+("while(n>="+c+" || Math.round(n*"+f+")/"+f+">="+c+"){\nn/=10;\nm--;\n}\n")+"}\n"+("n=(Math.round(n*sign*"+f+")/"+f+").toString().split('.');\n")+("res.value=DataFormatter.fillNumberPattern(parseInt(n[0]),'"+g[1]+"')+"),g[2]&&(l+="'"+DataFormatter.locale.decimal_separator+"'+",g[3]&&(l+="DataFormatter.fillNumberPattern(parseInt(n[1]),'"+g[3]+"','right')+")),l+="'E'+(m>0?'-':'+')+DataFormatter.fillNumberPattern(Math.abs(m),'"+g[4]+"');\n";else{if(o=1,y[h]=y[h].replace(/(0|#|\?)(\s+)([^0?#]*)$/,function(n,e,t,r){return o*=Math.pow(1e3,t.length),e+r}),(g=y[h].match(/%/g))&&(o/=Math.pow(100,g.length)),g=y[h].match(/(.*?)\/(.*)/)){for(g[1]||(g[1]="#"),g[2]||(g[2]="#"),i=g[1].length-1;"0"===g[1][i]&&"?"!==g[1][i]&&"#"!==g[1][i]&&" "!==g[1][i]&&i>0;)i--;g[3]=g[1].substr(0,i),g[4]=g[1].substr(i),l+=g[3]?'var f=0, factor=1, c=1, m=n.toString().split(".");\nif (m[1]) { c=Math.pow(10,m[1].length); f=parseInt(m[1]); factor=DataFormatter.gcd(f,c); }\n'+("res.value=DataFormatter.fillNumberPattern(Math.floor(n),'"+g[3]+"')+")+("DataFormatter.fillNumberPattern(f/factor,'"+g[4]+"')+")+'"/"+'+("DataFormatter.fillNumberPattern(c/factor,'"+g[2]+"');\n"):'var m=n.toString().split("."); m=m[1]?Math.pow(10,m[1].length):1;\nn=Math.floor(n*m);var factor=DataFormatter.gcd(n,m);\n'+("res.value=DataFormatter.fillNumberPattern(n/factor,'"+g[4]+"')+")+'"/"+'+("DataFormatter.fillNumberPattern(m/factor,'"+g[2]+"');\n")}else(g=y[h].match(/(.*?)\.(.*)/))?(g[1]||(g[1]="0"),g[2]?f=Math.pow(10,g[2].match(/0|\?|#/g).length):(g[2]="",f=1),g[1]=g[1].replace(/(0|#|\?)(\s+)([^0?#]*)$/,function(n,e,t,r){return o*=Math.pow(1e3,t.length),e+r}),l+="n=(Math.round(n*"+f+")/"+f+").toString().split('.');\n"+("res.value=DataFormatter.fillNumberPattern(parseInt(n[0]),'"+g[1]+"')+")+("'"+DataFormatter.locale.decimal_separator+"'+")+("DataFormatter.fillNumberPattern(parseInt(n[1]||0),'"+g[2]+"','right');\n")):l+="res.value=DataFormatter.fillNumberPattern(parseInt(n),'"+y[h]+"');\n";1!==o&&(l="n/="+o+";\n"+l)}l="if(n<1e21 && n>-1e21){\n "+l+" }\nelse{\nres.value=n.toString().toUpperCase();\n}\n",s||(s='type=="Number"'),m+=l}else u=!1,y[h]=y[h].replace(/\[(h+?|m+?|s+?|y+?)]/gi,function(n,e){return u=!0,e}),m+='if(type=="DateTime"){\n',m+="n=new Date(n);\n",m+="if (!isNaN(n.getTime())){\n",m+='res.align="right";\n',u?(m+='var m, found_hours, found_minutes;\nn=Math.abs(n.getTime()-(new Date("1899-12-31T00:00:00.000")).getTime());\n',y[h]=y[h].replace(/a|p|am|pm|mmm|mmmm|mmmmm|d|y/gi,""),y[h].match(/h/i)&&(m+="found_hours=true;\n"),y[h].match(/m/i)&&(m+="found_minutes=true;\n"),m+="res.value='"+y[h]+'\'.replace(/(hh)|(h)|(mm)|(m)|(ss)|(s)/gi,function(a,hh,h,mm,m,ss,s){\nif (hh) { return (m=parseInt(n/1000/60/60))<10 ? "0"+m : m; }\nif (h) return parseInt(n/1000/60/60);\nif (mm) { m=found_hours ? parseInt(n/1000/60%60) : parseInt(n/1000/60) ;  return m<10 ? "0"+m : m; }\nif (m) { m=found_hours ? parseInt(n/1000/60%60) : parseInt(n/1000/60) ;  return m; }\nif (ss) { m=found_minutes ? parseInt(n/1000%60) : parseInt(n/1000) ;  return m<10 ? "0"+m : m; }\nif (s) { m=found_minutes ? parseInt(n/1000%60) : parseInt(n/1000) ;  return m; }\nreturn "";\n});\n'):(m+="var found_ampm;\n",m+='res.value="'+y[h]+'".replace(/((?:am\\/pm)|(?:a\\/p))|(?:(h[^ydsap]*?)mm)|(?:mm([^ydh]*?s))|(?:(h[^ydsap]*?)m)|(?:m([^ydh]*?s))/gi,function(a,ampm,fmin,fmin2,mmin,mmin2){\nif (ampm) { found_ampm=true; return "[]"; }\nif (fmin) { m=n.getMinutes(); return fmin + (m<10 ? "0" + m : m); }\nif (fmin2) { m=n.getMinutes(); return (m<10 ? "0" + m : m) + fmin2; }\nif (mmin) { return mmin + n.getMinutes(); }\nif (mmin2) { return n.getMinutes() + mmin2; }\nreturn "";\n});\nres.value=res.value.replace(/(ss)|(s)|(hh)|(h)|(dddd)|(ddd)|(dd)|(d)|(mmmmm)|(mmmm)|(mmm)|(mm)|(m)|(yyyy)|(yy)|(\\[])/gi,function(a,ss,s,hh,h,dddd,ddd,dd,d,mmmmm,mmmm,mmm,mm,m,yyyy,yy,ampm){\nif (ss) { m=n.getSeconds(); return m<10 ? "0" + m : m; }\nif (s) { return n.getSeconds(); }\nif (hh) { m=n.getHours(); if (found_ampm) m=m%12; return m<10 ? "0" + m : m; }\nif (h) { return n.getHours(); if (found_ampm) m=m%12; }\nif (hh) { m=n.getHours(); return m<10 ? "0" + m : m; }\nif (dddd) { return DataFormatter.locale.days[n.getDay()]; }\nif (ddd) { return DataFormatter.locale.days_short[n.getDay()]; }\nif (dd) { m=n.getDate(); return m<10 ? "0" + m : m; }\nif (d) { return n.getDate(); }\nif (mmmmm) return DataFormatter.locale.months_short[n.getMonth()][0];\nif (mmmm) return DataFormatter.locale.months[n.getMonth()];\nif (mmm) return DataFormatter.locale.months_short[n.getMonth()];\nif (mm) { m=n.getMonth()+1; return m<10 ? "0" + m : m; }\nif (m) { return n.getMonth()+1; }\nif (yyyy) return n.getFullYear();\nif (yy) return n.getFullYear().toString().substr(2);\nif (ampm) return n.getHours()<12 ? "AM" : "PM";\nreturn "";\n});\n'),m+="\n}}\n";m+="res.value=DataFormatter.makeReplaces(res.value,repl);\n",m+="return res;\n",a+=s?"if("+s+"){\n "+m+" }\n\n":m}a+="return {value:n};\n"}return(DataFormatter.functions[t]=Function("n,type",a))(n,e)},fillNumberPattern:function(n,e,t){var r,a,m,s,i,l,u,o,f,h,c,g,p;if(n=n.toString(),s="","right"===t)for(a=0,r=l=0,u=e.length-1;u>=0?u>=l:l>=u;r=u>=0?++l:--l)switch(e[r]){case"0":s+=null!=(o=n[a])?o:"0",a++;break;case"#":s+=null!=(f=n[a])?f:"",a++;break;case"?":s+=null!=(h=n[a])?h:" ",a++;break;case"[":for(;r<e.length&&""!==e[r];)s+=e[r],r++;r--;break;default:s+=e[r]}else{if(i=!1,e=e.replace(/(0|#|\?)(,+?)(0|#|\?)/g,function(n,e,t,r){return i=!0,e+r}),i)for(a=n.length-3;"-"===n[0]?a>1:a>0;)n=n.substr(0,a)+DataFormatter.locale.thousands_separator+n.substr(a),a-=3;for(a=n.length-1,r=e.length;r--;)switch(e[r]){case"0":s=(null!=(c=n[a])?c:"0")+s,m=r,a--;break;case"#":s=(null!=(g=n[a])?g:"")+s,m=r,a--;break;case"?":s=(null!=(p=n[a])?p:" ")+s,m=r,a--;break;case"]":for(;r>0&&"["!==e[r];)s=e[r]+s,r--;r++;break;default:s=e[r]+s}a>=0&&null!==m&&(s=s.substr(0,m)+n.substr(0,a+1)+s.substr(m))}return s},makeReplaces:function(n,e){return n.replace(/\[(?:(\$*)|(.*))]/g,function(n,t){return t&&e[t.length]?e[t.length]:""})},gcd:function(n,e){for(var t;e;)t=n%e,n=e,e=t;return n}};
//# sourceMappingURL=dataformatter.min.map