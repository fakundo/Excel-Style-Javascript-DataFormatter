window.DataFormatter={functions:{},locale:{months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],months_short:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],days_short:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],thousands_separator:" ",decimal_separator:",",formats:{"General Number":"#.#",Currency:"#,##0.00р.;[Red]-#,##0.00р.",Fixed:"0.00",Standard:"#,##0.00",Percent:"0.00%",Scientific:"0.00E+00","Yes/No":'"Да";"Да";"Нет"',"True/False":'"Истина";"Истина";"Ложь"',"On/Off":'"Вкл";"Вкл";"Выкл"',"Short Date":"mm.dd.yyyy","Long Date":"dd mmmm yyyy","General Date":"mm.dd.yyyy h:mm","Medium Date":"dd.mmm.yy","Long Time":"hh:mm:ss AM/PM","Short Time":"h:mm","Medium Time":"hh:mm AM/PM"}},format:function(e,n,t){var r,a,m,s,u,i,l,o,f,h,c,p,d,g,y,D;if(t=t.toString(),DataFormatter.functions[t])return DataFormatter.functions[t](e,n);for(a="",d="",g="",y=t,DataFormatter.locale.formats[y]&&(y=DataFormatter.locale.formats[y]),y=y.replace(/"([^"]+)"|\\(.?)|(_.?)|(\*.?)|(")/g,function(e,n,t,r){return n?(d+=',"'+n.replace(/("|'|\\)/g,"\\$1")+'"',"["+(g+="$")+"]"):t?(d+=',"'+t.replace(/("|'|\\)/g,"\\$1")+'"',"["+(g+="$")+"]"):r?(d+='," "',"["+(g+="$")+"]"):""}),a="var repl = ["+d+"];",y=y.split(/;/),h=-1,D=Math.min(4,y.length);++h<D;){if(s="",r=!1,s=y[h].match(/\[((?:>|>=|<|<=|=|<>)[0-9\.]+?)]/),s?s="type=='Number' && n "+s[1].replace(/<>/,"!=").replace("/=/","=="):0===h&&y.length>2?s='type=="Number" && n>0':0===h&&y.length>1?s='type=="Number" && n>=0':1===h&&y.length>2?(s='type=="Number" && n<0',r=!0):2===h&&y.length>3&&(s='type=="Number"'),m="var res={value:'"+y[h]+'\'};\nif (type == "Number" || type =="DateTime") res.align = \'right\';',(p=y[h].match(/\[(Red|Green|White|Blue|Magenta|Yellow|Cyan|Black)]/i))&&(m+="res.color='"+p[1]+"';"),y[h]=y[h].replace(/(\[((?!((\$*?)|(h*?)|(m*?)|(s*?))]).*?)])/,""),y[h].match(/General/i))m+="res.value=n;\nif (type == 'Number'){\n  if (!isNaN(n) && n!=''){\n    if (n<1e21 && n>-1e21){\n      n=parseFloat(n);\n      res.value=n;\n      if (n != parseInt(n / 1)) {\n        res.value = (Math.round(n*100)/100).toString().replace(/\\./,'"+DataFormatter.locale.decimal_separator+"');\n      }\n    }\n    else{\n      res.value=n.toString().toUpperCase();\n    }\n  }\n}\nelse if(type == 'DateTime' && !isNaN((new Date(n)).getTime())){\n  res.value = Math.abs((new Date(n)).getTime()-(new Date('1899-12-31T00:00:00.000')).getTime())/1000/60/60/24;\n}";else{if(y[h].match(/@/))m+="res.value='"+y[h]+"'.replace(/@/,n);";else if(y[h].match(/#|\?|0/)){if(i="n=parseFloat(n);",r&&(i+="n=Math.abs(n);"),p=y[h].match(/(.*?)(?:(\.)(.*?))?e(?:\+|\-)(.*)/i))p[1]?c=Math.pow(10,p[1].match(/0|\?|#/g).length):(p[1]="#",c=10),p[3]?f=Math.pow(10,p[3].match(/0|\?|#/g).length):(p[3]="",f=1),p[4]||(p[4]=""),i+="var m=0,sign=n<0?-1:1;\nn=Math.abs(n);\nif(n!=0){\n while(n < "+c+" || Math.round(n*"+f+")/"+f+" < "+c+"){\n   n*=10;\n   m++;\n }\n while(n >= "+c+" || Math.round(n*"+f+")/"+f+" >= "+c+"){\n   n/=10;\n   m--;\n }\n}\nn=(Math.round(n*sign*"+f+")/"+f+").toString().split('.');\nres.value=DataFormatter.fillNumberPattern(parseInt(n[0]),'"+p[1]+"');",p[2]&&(i+="'"+DataFormatter.locale.decimal_separator+"'+",p[3]&&(i+="DataFormatter.fillNumberPattern(parseInt(n[1]),'"+p[3]+"','right')+")),i+="'E'+(m>0?'-':'+')+DataFormatter.fillNumberPattern(Math.abs(m),'"+p[4]+"');";else{if(o=1,y[h]=y[h].replace(/(0|#|\?)(,+)([^0?#]*)$/,function(e,n,t,r){return o*=Math.pow(1e3,t.length),n+r}),(p=y[h].match(/%/g))&&(o/=Math.pow(100,p.length)),p=y[h].match(/(.*?)\/(.*)/)){for(p[1]||(p[1]="#"),p[2]||(p[2]="#"),u=p[1].length-1;"0"===p[1][u]&&"?"!==p[1][u]&&"#"!==p[1][u]&&" "!==p[1][u]&&u>0;)u--;p[3]=p[1].substr(0,u),p[4]=p[1].substr(u),i+=p[3]?"var f=0, factor=1, c=1, m=n.toString().split('.');\nif(m[1]){c=Math.pow(10,m[1].length); f=parseInt(m[1]); factor=DataFormatter.gcd(f,c);}\nres.value=DataFormatter.fillNumberPattern(Math.floor(n),'"+p[3]+"') + DataFormatter.fillNumberPattern(f/factor,'"+p[4]+"') + '/' + DataFormatter.fillNumberPattern(c/factor,'"+p[2]+"');":'var m=n.toString().split(".");\nm=m[1]?Math.pow(10,m[1].length):1;\nn=Math.floor(n*m);\nvar factor=DataFormatter.gcd(n,m);\nres.value=DataFormatter.fillNumberPattern(n/factor,\''+p[4]+"')+'/'+DataFormatter.fillNumberPattern(m/factor,'"+p[2]+"');"}else(p=y[h].match(/(.*?)\.(.*)/))?(p[1]||(p[1]="0"),p[2]?f=Math.pow(10,p[2].match(/0|\?|#/g).length):(p[2]="",f=1),p[1]=p[1].replace(/(0|#|\?)(,+)([^0?#]*)$/,function(e,n,t,r){return o*=Math.pow(1e3,t.length),n+r}),i+="n=(Math.round(n*"+f+")/"+f+").toString().split('.');\nres.value=DataFormatter.fillNumberPattern(parseInt(n[0]),'"+p[1]+"')+'"+DataFormatter.locale.decimal_separator+"'+DataFormatter.fillNumberPattern(parseInt(n[1]||0),'"+p[2]+"','right');"):i+="res.value=DataFormatter.fillNumberPattern(Math.round(n),'"+y[h]+"');";1!==o&&(i="n/="+o+";\n"+i)}i="if(n<1e21 && n>-1e21){\n  "+i+"\n}\nelse{\n  res.value=n.toString().toUpperCase();\n}",s||(s='type=="Number"'),m+=i}else y[h].match(/h|m|s|y/i)&&(l=!1,y[h]=y[h].replace(/\[(h+?|m+?|s+?|y+?)]/gi,function(e,n){return l=!0,n}),m+="if(type=='DateTime'){\n  n=new Date(n);\n  if (!isNaN(n.getTime())){",l?(m+="var m, found_hours, found_minutes;\nn=Math.abs(n.getTime()-(new Date('1899-12-31T00:00:00.000')).getTime());",y[h]=y[h].replace(/a|p|am|pm|mmm|mmmm|mmmmm|d|y/gi,""),y[h].match(/h/i)&&(m+="found_hours=true;"),y[h].match(/m/i)&&(m+="found_minutes=true;"),m+="res.value='"+y[h]+"'.replace(/(hh)|(h)|(mm)|(m)|(ss)|(s)/gi,function(a,hh,h,mm,m,ss,s){\n  if (hh) { return (m=parseInt(n/1000/60/60))<10 ? '0'+m : m; }\n  if (h) return parseInt(n/1000/60/60);\n  if (mm) { m=found_hours ? parseInt(n/1000/60%60) : parseInt(n/1000/60) ;  return m<10 ? '0'+m : m; }\n  if (m) { m=found_hours ? parseInt(n/1000/60%60) : parseInt(n/1000/60) ;  return m; }\n  if (ss) { m=found_minutes ? parseInt(n/1000%60) : parseInt(n/1000) ;  return m<10 ? '0'+m : m; }\n  if (s) { m=found_minutes ? parseInt(n/1000%60) : parseInt(n/1000) ;  return m; }\n  return '';\n});"):m+="var found_ampm\nres.value='"+y[h]+"'.replace(/((?:am\\/pm)|(?:a\\/p))|(?:(h[^ydsap]*?)mm)|(?:mm([^ydh]*?s))|(?:(h[^ydsap]*?)m)|(?:m([^ydh]*?s))/gi,function(a,ampm,fmin,fmin2,mmin,mmin2){\n  if (ampm) { found_ampm=true; return '[]'; }\n  if (fmin) { m=n.getMinutes(); return fmin + (m<10 ? '0' + m : m); }\n  if (fmin2) { m=n.getMinutes(); return (m<10 ? '0' + m : m) + fmin2; }\n  if (mmin) return mmin + n.getMinutes();\n  if (mmin2) return n.getMinutes() + mmin2;\n  return '';\n  });\n  res.value=res.value.replace(/(ss)|(s)|(hh)|(h)|(dddd)|(ddd)|(dd)|(d)|(mmmmm)|(mmmm)|(mmm)|(mm)|(m)|(yyyy)|(yy)|(\\[])/gi,function(a,ss,s,hh,h,dddd,ddd,dd,d,mmmmm,mmmm,mmm,mm,m,yyyy,yy,ampm){\n  if (ss) { m=n.getSeconds(); return m<10 ? '0' + m : m; }\n  if (s) return n.getSeconds();\n  if (hh) { m=n.getHours(); if (found_ampm) m=m%12; return m<10 ? '0' + m : m; }\n  if (h) { if (found_ampm) m=m%12; return n.getHours(); }\n  if (hh) { m=n.getHours(); return m<10 ? '0' + m : m; }\n  if (dddd) return DataFormatter.locale.days[n.getDay()];\n  if (ddd) return DataFormatter.locale.days_short[n.getDay()];\n  if (dd) { m=n.getDate(); return m<10 ? '0' + m : m; }\n  if (d) return n.getDate();\n  if (mmmmm) return DataFormatter.locale.months_short[n.getMonth()][0];\n  if (mmmm) return DataFormatter.locale.months[n.getMonth()];\n  if (mmm) return DataFormatter.locale.months_short[n.getMonth()];\n  if (mm) m=n.getMonth()+1; return m<10 ? '0' + m : m;\n  if (m) return n.getMonth()+1;\n  if (yyyy) return n.getFullYear();\n  if (yy) return n.getFullYear().toString().substr(2);\n  if (ampm) return n.getHours()<12 ? 'AM' : 'PM';\n  return '';\n});",m+="}}");m+="res.value=DataFormatter.makeReplaces(res.value,repl);"}m+="return res;",a+=s?"if("+s+"){\n  "+m+"\n}":m}return a+="return {value:n};",(DataFormatter.functions[t]=Function("n,type",a))(e,n)},fillNumberPattern:function(e,n,t){var r,a,m,s,u,i,l,o,f,h,c,p;if(e=e.toString(),s="","right"===t)for(a=0,r=-1,i=n.length;++r<i;)switch(n[r]){case"0":s+=null!=(l=e[a])?l:"0",a++;break;case"#":s+=null!=(o=e[a])?o:"",a++;break;case"?":s+=null!=(f=e[a])?f:" ",a++;break;case"[":for(;r<n.length&&"]"!==n[r];)s+=n[r],r++;r--;break;default:s+=n[r]}else{if(u=!1,n=n.replace(/(0|#|\?)(,+?)(0|#|\?)/g,function(e,n,t,r){return u=!0,n+r}),u)for(a=e.length-3;"-"===e[0]?a>1:a>0;)e=e.substr(0,a)+DataFormatter.locale.thousands_separator+e.substr(a),a-=3;for(a=e.length-1,r=n.length;r--;)switch(n[r]){case"0":s=(null!=(h=e[a])?h:"0")+s,m=r,a--;break;case"#":s=(null!=(c=e[a])?c:"")+s,m=r,a--;break;case"?":s=(null!=(p=e[a])?p:" ")+s,m=r,a--;break;case"]":for(;r>0&&"["!==n[r];)s=n[r]+s,r--;r++;break;default:s=n[r]+s}a>=0&&null!==m&&(s=s.substr(0,m)+e.substr(0,a+1)+s.substr(m))}return s},makeReplaces:function(e,n){return e=e.replace(/\[(?:(\$*?)|(.*?))\]/g,function(e,t){return t&&n[t.length]?n[t.length]:""})},gcd:function(e,n){for(var t;n;)t=e%n,e=n,n=t;return e}};
//# sourceMappingURL=dataformatter.min.map